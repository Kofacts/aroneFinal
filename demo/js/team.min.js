$(document).ready(function() {
  function is_touch_device() {
    return (
      "ontouchstart" in window || navigator.maxTouchPoints // works on most browsers
    ); // works on IE10/11 and Surface
  }

  if (is_touch_device()) {
    $("html").removeClass("notouch");
  }

  var slicked = $(".team-carousel");

  slicked.slick({
    infinite: true,
    dots: true,
    draggable: false,
    variableWidth: false,
    slidesToShow: 5,
    slidesToScroll: 5,
    arrows: true,
    prevArrow:
      '<button class="prev-next-button previous" type="button" aria-label="previous"><svg viewBox="0 0 100 100"><path d="M 10,50 L 65,100 L 70,95 L 20,50  L 70,5 L 65,0 Z" class="arrow"></path></svg></button>',
    nextArrow:
      '<button class="prev-next-button next" type="button" aria-label="next"><svg viewBox="0 0 100 100"><path d="M 10,50 L 65,100 L 70,95 L 20,50  L 70,5 L 65,0 Z" class="arrow" transform="translate(100, 100) rotate(180) "></path></svg></button>',
    responsive: [
      {
        breakpoint: 1280,
        settings: {
          slidesToShow: 4,
          slidesToScroll: 4
        }
      },
      {
        breakpoint: 1024,
        settings: {
          slidesToShow: 3,
          slidesToScroll: 3,
          draggable: true
        }
      },
      {
        breakpoint: 600,
        settings: {
          slidesToShow: 2,
          slidesToScroll: 2,
          draggable: true
        }
      },
      {
        breakpoint: 480,
        settings: {
          slidesToShow: 1,
          slidesToScroll: 1,
          draggable: true
        }
      }
      // You can unslick at a given breakpoint now by adding:
      // settings: "unslick"
      // instead of a settings object
    ]
  });

  var filtered = false;

  //Nicer Keyboard accessibility, no scrolling involved
  slicked.on("afterChange", function(event, slick, currentSlide) {
    var x = $(document).scrollLeft(),
      y = $(document).scrollTop();
    $(slick.$slides[slick.currentSlide]).one("focusin", function() {
      window.scrollTo(x, y);
    });
  });

  $(".team-nav").on("click", "a", function(evt) {
    var $target = $(evt.target);
    var selector = $target.data("selector");
    $(".team-nav .active").removeClass("active");
    $target.addClass("active");

    slicked.slick("slickGoTo", 0, true);

    if (filtered) {
      slicked.slick("slickUnfilter");
      filtered = false;
    }
    if (selector !== "*") {
      slicked.slick("slickFilter", selector);
      filtered = true;
    }
  });
});
